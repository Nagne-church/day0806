<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>대요리문답 128문: 아랫사람이 윗사람에게 범하는 죄 (인포그래픽)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            scroll-behavior: smooth;
        }
        .infographic-card {
            background-color: white;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            padding: 2rem;
            border-left-width: 8px;
        }
        .icon-bg {
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 9999px;
            width: 64px;
            height: 64px;
        }
        .modal-overlay {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
        .chat-bubble {
            max-width: 80%;
            padding: 12px 18px;
            border-radius: 20px;
            line-height: 1.6;
        }
        .user-bubble {
            background-color: #E5E7EB; /* gray-200 */
            color: #1F2937; /* gray-800 */
            align-self: flex-end;
        }
        .ai-bubble {
            background-color: #3B82F6; /* blue-500 */
            color: white;
            align-self: flex-start;
        }
        #loading-indicator {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto max-w-5xl px-4 py-16">
        <header class="text-center mb-16">
            <h1 class="text-5xl font-extrabold text-gray-900 leading-tight">대요리문답 128문</h1>
            <p class="mt-4 text-2xl font-semibold text-blue-600">아랫사람이 윗사람에게 범하는 죄</p>
            <p class="mt-3 text-lg text-gray-600 max-w-3xl mx-auto">제5계명이 금지하는, 하나님께서 세우신 권위와 질서를 거스르는 죄의 종류와 그 본질에 대한 인포그래픽 해설</p>
        </header>

        <main id="notes-container" class="space-y-12">
            
            <!-- Chapter 1: Sins of Omission -->
            <section id="chapter-1" class="infographic-card border-gray-400">
                <div class="flex flex-col md:flex-row items-start gap-8">
                    <div class="icon-bg bg-gray-200 text-gray-600">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7" /></svg>
                    </div>
                    <div class="flex-1 chapter-content">
                        <h2 class="text-3xl font-bold text-gray-800">1. 소극적 죄: 의무의 무시와 태만</h2>
                        <p class="mt-2 text-lg text-gray-600">가장 근본적인 죄는 마땅히 해야 할 존경과 의무를 행하지 않는 '부작위(不作爲)'의 죄입니다. 이는 행동하지 않음으로써 하나님의 명령을 어기는 것입니다.</p>
                        
                        <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h3 class="font-bold text-xl text-gray-700">의도적 무시</h3>
                                <p class="mt-1 text-gray-600">윗사람의 지위와 권위 자체를 인정하지 않고, 그에게 요구되는 모든 의무(존경, 순종, 감사 등)를 고의로 이행하지 않는 상태입니다. 이는 교만의 직접적인 표현입니다.</p>
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h3 class="font-bold text-xl text-gray-700">나태와 소홀</h3>
                                <p class="mt-1 text-gray-600">의무 자체를 부정하지는 않으나, 게으름과 무관심으로 인해 마땅히 행해야 할 존경과 의무의 표현을 소홀히 하는 태도입니다. 이는 책임감의 결여입니다.</p>
                            </div>
                        </div>
                        <p class="mt-6 text-md text-gray-500 italic"><strong>핵심 원리:</strong> 윗사람에게 순종하는 것은 그 사람이 완벽해서가 아니라, 하나님께서 그를 그 자리에 세우셨기 때문입니다. 따라서 의무를 무시하는 것은 곧 하나님의 권위 설정을 무시하는 행위입니다.</p>
                    </div>
                </div>
                <div class="mt-8 text-right">
                    <button class="ask-question-btn bg-gray-600 text-white font-semibold py-2 px-5 rounded-lg hover:bg-gray-700 transition-colors">이해를 돕는 질문하기</button>
                </div>
            </section>

            <!-- Chapter 2: Sins of Hostile Attitude -->
            <section id="chapter-2" class="infographic-card border-red-500">
                 <div class="flex flex-col md:flex-row items-start gap-8">
                    <div class="icon-bg bg-red-100 text-red-600">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>
                    </div>
                    <div class="flex-1 chapter-content">
                        <h2 class="text-3xl font-bold text-red-800">2. 내면적 죄: 시기, 경멸, 반역의 마음</h2>
                        <p class="mt-2 text-lg text-gray-600">소극적인 무시를 넘어, 마음속에서 윗사람의 권위를 부정하고 적대적인 태도를 품는 것입니다. 이 죄들은 종종 외부로 드러나기 전, 내면에서 먼저 자라납니다.</p>
                        
                        <div class="mt-8 grid grid-cols-1 lg:grid-cols-3 gap-8">
                            <!-- 시기 -->
                            <div class="text-center p-4">
                                <div class="icon-bg bg-green-100 text-green-600 mx-auto">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /></svg>
                                </div>
                                <h3 class="mt-4 font-bold text-2xl text-green-700">시기 (Envy)</h3>
                                <p class="mt-2 text-gray-600">하나님께서 윗사람에게 부여하신 지위, 권위, 은사 등을 불만스럽게 여기는 마음입니다. 이는 '왜 내가 아니고 저 사람이냐'는 불만으로, 하나님의 주권적인 섭리를 헐뜯는 심각한 죄입니다.</p>
                            </div>
                            <!-- 경멸 -->
                            <div class="text-center p-4">
                                <div class="icon-bg bg-yellow-100 text-yellow-600 mx-auto">
                                   <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6" /></svg>
                                </div>
                                <h3 class="mt-4 font-bold text-2xl text-yellow-700">경멸 (Contempt)</h3>
                                <p class="mt-2 text-gray-600">윗사람을 얕보고 하찮게 여기며 그의 인격과 권위를 무시하는 태도입니다. 합법적인 권고, 명령, 교정을 가볍게 여기고 불복종하는 행동으로 나타납니다. 존중이 결여된 상태입니다.</p>
                            </div>
                            <!-- 반역 -->
                            <div class="text-center p-4">
                                 <div class="icon-bg bg-purple-100 text-purple-600 mx-auto">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" /></svg>
                                </div>
                                <h3 class="mt-4 font-bold text-2xl text-purple-700">반역 (Rebellion)</h3>
                                <p class="mt-2 text-gray-600">윗사람의 권위와 명령에 대해 공개적으로 순종을 거부하고 정면으로 대적하는 것입니다. 이는 개인적 불순종을 넘어 공동체의 질서 자체를 파괴하려는 시도입니다. (예: 압살롬의 반역)</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-8 text-right">
                    <button class="ask-question-btn bg-red-600 text-white font-semibold py-2 px-5 rounded-lg hover:bg-red-700 transition-colors">이해를 돕는 질문하기</button>
                </div>
            </section>
            
            <!-- Chapter 3: Sins of Aggressive Action -->
            <section id="chapter-3" class="infographic-card border-indigo-500">
                <div class="flex flex-col md:flex-row items-start gap-8">
                    <div class="icon-bg bg-indigo-100 text-indigo-600">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    </div>
                    <div class="flex-1 chapter-content">
                        <h2 class="text-3xl font-bold text-indigo-800">3. 적극적 죄: 저주, 조롱, 불명예스러운 행동</h2>
                        <p class="mt-2 text-lg text-gray-600">내면의 적대감이 말과 행동으로 표출되어, 윗사람과 그가 속한 공동체에 직접적인 해를 끼치는 행위입니다.</p>
                        
                        <div class="mt-6 space-y-6">
                            <div class="flex items-start gap-4">
                                <div class="flex-shrink-0 w-8 h-8 bg-indigo-200 text-indigo-700 rounded-full flex items-center justify-center font-bold">1</div>
                                <div>
                                    <h3 class="font-bold text-xl text-gray-700">저주와 조롱</h3>
                                    <p class="mt-1 text-gray-600">윗사람에게 악담을 퍼붓거나 불행을 바라는 '저주'와, 그의 인격이나 권위를 비웃음거리로 만들어 명예를 훼손하는 '조롱'은 그의 인격과 지위를 직접 공격하는 행위입니다.</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-4">
                                <div class="flex-shrink-0 w-8 h-8 bg-indigo-200 text-indigo-700 rounded-full flex items-center justify-center font-bold">2</div>
                                <div>
                                    <h3 class="font-bold text-xl text-gray-700">불량하고 불미스러운 행동거지</h3>
                                    <p class="mt-1 text-gray-600">고집스럽게 윗사람의 합법적인 지도를 거부하고, 다른 사람들을 실족하게 만드는 모든 수치스러운 행동을 포함합니다. 이는 개인의 일탈을 넘어 공동체 전체에 수치와 불명예를 안겨줍니다.</p>
                                </div>
                            </div>
                        </div>
                         <p class="mt-6 text-md text-gray-500 italic"><strong>궁극적 죄의 대상:</strong> 아랫사람의 이 모든 죄는 표면적으로는 윗사람을 향하지만, 본질적으로는 그를 세우시고 그를 통해 질서를 유지하시는 **하나님의 섭리와 권위를 부정하고 대적하는 심각한 죄**입니다.</p>
                    </div>
                </div>
                <div class="mt-8 text-right">
                    <button class="ask-question-btn bg-indigo-600 text-white font-semibold py-2 px-5 rounded-lg hover:bg-indigo-700 transition-colors">이해를 돕는 질문하기</button>
                </div>
            </section>

        </main>
    </div>

    <!-- Q&A Modal -->
    <div id="qa-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 hidden z-50">
        <div class="modal-content bg-white w-full max-w-2xl rounded-xl shadow-2xl flex flex-col max-h-[90vh] transform scale-95">
            <header class="flex items-center justify-between p-4 border-b">
                <h3 id="modal-title" class="text-xl font-bold text-gray-800">질문하기</h3>
                <button id="close-modal-btn" class="text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
            </header>
            
            <div id="chat-container" class="flex-grow p-4 overflow-y-auto space-y-4">
                <!-- Chat messages will be appended here -->
            </div>
            
            <div id="loading-indicator" class="p-4 text-center text-gray-500">
                <div class="flex justify-center items-center space-x-2">
                    <div class="animate-spin rounded-full h-5 w-5 border-b-2 border-gray-900"></div>
                    <span>답변을 생성하고 있습니다...</span>
                </div>
            </div>

            <footer class="p-4 border-t bg-gray-50">
                <form id="qa-form" class="flex items-center gap-3">
                    <input type="text" id="question-input" placeholder="여기에 질문을 입력하세요..." class="flex-grow p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none" autocomplete="off">
                    <button type="submit" class="bg-blue-600 text-white font-semibold py-3 px-5 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400">
                        전송
                    </button>
                </form>
            </footer>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const qaModal = document.getElementById('qa-modal');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const askQuestionBtns = document.querySelectorAll('.ask-question-btn');
            const qaForm = document.getElementById('qa-form');
            const questionInput = document.getElementById('question-input');
            const chatContainer = document.getElementById('chat-container');
            const modalTitle = document.getElementById('modal-title');
            const loadingIndicator = document.getElementById('loading-indicator');

            let currentChapterTitle = '';
            let currentChapterContext = '';

            const openModal = (btn) => {
                const chapterSection = btn.closest('section');
                currentChapterTitle = chapterSection.querySelector('h2').textContent.trim();
                currentChapterContext = chapterSection.querySelector('.chapter-content').innerText.trim();
                
                modalTitle.textContent = `'${currentChapterTitle}'에 대해 질문하기`;
                chatContainer.innerHTML = `
                    <div class="ai-bubble chat-bubble">
                        안녕하세요! '${currentChapterTitle}' 내용에 대해 궁금한 점을 질문해주세요. 제가 아는 선에서 자세히 답변해 드리겠습니다.
                    </div>
                `;
                qaModal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
                setTimeout(() => {
                    qaModal.querySelector('.modal-overlay').classList.remove('opacity-0');
                    qaModal.querySelector('.modal-content').classList.remove('scale-95');
                }, 10);
                questionInput.focus();
            };

            const closeModal = () => {
                qaModal.querySelector('.modal-overlay').classList.add('opacity-0');
                qaModal.querySelector('.modal-content').classList.add('scale-95');
                setTimeout(() => {
                    qaModal.classList.add('hidden');
                    document.body.style.overflow = 'auto';
                }, 300);
            };

            askQuestionBtns.forEach(btn => {
                btn.addEventListener('click', () => openModal(btn));
            });

            closeModalBtn.addEventListener('click', closeModal);
            qaModal.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal-overlay')) {
                    closeModal();
                }
            });

            qaForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const userQuestion = questionInput.value.trim();
                if (!userQuestion) return;

                appendMessage(userQuestion, 'user');
                questionInput.value = '';
                questionInput.disabled = true;
                qaForm.querySelector('button').disabled = true;
                loadingIndicator.style.display = 'block';
                chatContainer.scrollTop = chatContainer.scrollHeight;


                const finalPrompt = `
                    당신은 신학적 질문에 답변하는 전문 AI 어시스턴트입니다. 아래에 명시된 두 가지 규칙의 우선순위를 반드시 지켜서 사용자의 질문에 답변해 주세요.

                    [규칙 1: 주어진 자료 우선의 원칙]
                    - 최우선적으로, 아래에 제공되는 "[강의 노트 내용]"에 근거하여 답변을 생성해야 합니다.
                    - 자료에 명시된 사실과 논리를 바탕으로 질문에 직접적으로 그리고 자연스럽게 답해주세요.

                    [규칙 2: 신학적 보충의 원칙]
                    - 만약 "[강의 노트 내용]"만으로 답변하기에 정보가 불충분하거나 관련 내용이 없을 경우에는, '전통적 개혁신학'의 관점에서 답변을 보충할 수 있습니다.
                    - 이 경우, 답변의 문맥상 필요하다면 "전통적 개혁신학의 관점에서 볼 때..."와 같이 서술을 시작해주세요.

                    ---
                    [강의 노트 제목]: ${currentChapterTitle}
                    ---
                    [강의 노트 내용]:
                    ${currentChapterContext}
                    ---
                    [사용자 질문]:
                    ${userQuestion}
                `;

                try {
                    const response = await fetch('/api/ask-gemini', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ prompt: finalPrompt })
                    });

                    if (!response.ok) {
                        throw new Error(`서버 오류가 발생했습니다: ${response.statusText}`);
                    }

                    const data = await response.json();
                    
                    let aiResponse = "죄송합니다. 답변을 생성하는 데 문제가 발생했습니다.";
                    if (data && data.candidates && data.candidates[0] && data.candidates[0].content && data.candidates[0].content.parts && data.candidates[0].content.parts[0] && data.candidates[0].content.parts[0].text) {
                        aiResponse = data.candidates[0].content.parts[0].text;
                    }
                    
                    appendMessage(aiResponse, 'ai');

                } catch (error) {
                    console.error('Error fetching AI response:', error);
                    appendMessage(`오류가 발생했습니다: ${error.message}`, 'ai');
                } finally {
                    loadingIndicator.style.display = 'none';
                    questionInput.disabled = false;
                    qaForm.querySelector('button').disabled = false;
                    questionInput.focus();
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }
            });

            function appendMessage(text, sender) {
                const bubble = document.createElement('div');
                bubble.classList.add('chat-bubble');
                if (sender === 'user') {
                    bubble.classList.add('user-bubble');
                    bubble.textContent = text;
                } else {
                    bubble.classList.add('ai-bubble');
                    let html = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                    html = html.replace(/^\s*[-*]\s+(.*)/gm, '<li class="ml-4 list-disc">$1</li>');
                    if (html.includes('<li')) {
                        html = '<ul>' + html.replace(/<\/li>/g, '</li><br>').replace(/<\/ul><br>$/, '</ul>') + '</ul>';
                    }
                    bubble.innerHTML = html.replace(/\n/g, '<br>');
                }
                chatContainer.appendChild(bubble);
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }
        });
    </script>

</body>
</html>
